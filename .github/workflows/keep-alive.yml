name: Keep Backend Alive

on:
  schedule:
    # Run every 13 minutes: at minutes 0, 13, 26, 39, 52 of every hour
    - cron: '0 * * * *'
    - cron: '13 * * * *'
    - cron: '26 * * * *'
    - cron: '39 * * * *'
    - cron: '52 * * * *'
  workflow_dispatch: # Allow manual triggering

jobs:
  ping-backend:
    runs-on: ubuntu-latest

    steps:
    - name: Ping Backend
      run: |
        echo "Pinging backend at https://testmance.onrender.com"
        curl -f https://testmance.onrender.com || echo "Ping failed, but continuing..."

    - name: Health Check
      run: |
        echo "Performing health check"
        # Try to access a common health endpoint or root
        curl -f https://testmance.onrender.com/health || curl -f https://testmance.onrender.com/ || echo "Health check completed"
